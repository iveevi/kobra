default_compiler: clang++
default_standard: c++17

definitions:
  - imgui_source: 'thirdparty/imgui/imgui.cpp,
    thirdparty/imgui/imgui_draw.cpp,
    thirdparty/imgui/imgui_demo.cpp,
    thirdparty/imgui/imgui_widgets.cpp,
    thirdparty/imgui/imgui_tables.cpp,
    thirdparty/imgui/backends/imgui_impl_glfw.cpp,
    thirdparty/imgui/backends/imgui_impl_vulkan.cpp'
  - mercury_source: 'main.cpp,
    render.cpp,
    source/vulkan.cpp,
    source/logger.cpp,
    source/capture.cpp'

builds:
  - mercury_release:
    - sources: mercury_source, imgui_source
    - idirs: 'thirdparty/glm,
      thirdparty/imgui,
      thirdparty/assimp/include,
      /usr/include/opencv4'
    - flags: '-O3 -std=c++17'
    - libraries: 'glfw,
      vulkan,
      assimp,
      pthread,
      opencv_core,
      opencv_imgcodecs,
      opencv_videoio'
  - mercury_debug:
    - sources: 'mercury_source,
      thirdparty/imgui/imgui.cpp,
      thirdparty/imgui/imgui_draw.cpp,
      thirdparty/imgui/imgui_demo.cpp,
      thirdparty/imgui/imgui_widgets.cpp,
      thirdparty/imgui/imgui_tables.cpp,
      thirdparty/imgui/backends/imgui_impl_glfw.cpp,
      thirdparty/imgui/backends/imgui_impl_vulkan.cpp'
    - idirs: 'thirdparty/glm,
      thirdparty/imgui,
      /usr/include/opencv4'
    - libraries: 'glfw,
      vulkan,
      assimp,
      pthread,
      opencv_core,
      opencv_imgcodecs,
      opencv_videoio'
    - flags: '-std=c++17 -g'

targets:
  - mercury:
    - modes: 'gdb'
    - builds:
      - default: mercury_release
      - gdb: mercury_debug
    - postbuilds:
      - default: '{}'
      - gdb: 'gdb {}'
