default_compiler: clang++
default_standard: c++17

definitions:
  - imgui_source: 'thirdparty/imgui/imgui.cpp,
    thirdparty/imgui/imgui_draw.cpp,
    thirdparty/imgui/imgui_demo.cpp,
    thirdparty/imgui/imgui_widgets.cpp,
    thirdparty/imgui/imgui_tables.cpp,
    thirdparty/imgui/backends/imgui_impl_glfw.cpp,
    thirdparty/imgui/backends/imgui_impl_vulkan.cpp'
  - kobra_source: 'source/capture.cpp,
    source/logger.cpp,
    source/material.cpp,
    source/mesh.cpp,
    source/model.cpp,
    source/object.cpp,
    source/scene.cpp,
    source/texture.cpp,
    source/vertex.cpp,
    source/vulkan.cpp,
    source/engine/rt_capture.cpp,
    source/gui/text.cpp,
    source/io/event.cpp,
    source/raster/layer.cpp,
    source/raster/mesh.cpp,
    source/raytracing/layer.cpp'
  - includes: 'thirdparty,
    thirdparty/freetype/include,
    thirdparty/glm,
    thirdparty/imgui,
    thirdparty/assimp/include'
  - libs: 'glfw,
    vulkan,
    assimp,
    pthread,
    avcodec,
    avformat,
    avutil,
    freetype'

builds:
  - kobra_release:
    - sources: main.cpp, kobra_source
    - idirs: includes
    - flags: '-O3 -std=c++17'
    - libraries: libs
  - kobra_debug:
    - sources: main.cpp, kobra_source
    - idirs: includes
    - libraries: libs
    - flags: '-std=c++17 -g'
  - kobra_wall:
    - sources: main.cpp, kobra_source
    - idirs: includes
    - libraries: libs
    - flags: '-std=c++17 -Wall -Werror'
  - experimental_normal:
    - sources: 'experimental/kobra.cpp,
      experimental/render.cpp,
      kobra_source,
      imgui_source'
    - idirs: 'thirdparty,
      thirdparty/freetype/include,
      thirdparty/glm,
      thirdparty/imgui,
      thirdparty/assimp/include'
    - flags: '-O3 -std=c++17'
    - libraries: 'glfw,
      vulkan,
      assimp,
      pthread,
      avcodec,
      avformat,
      avutil,
      freetype'

targets:
  - kobra:
    - modes: 'gdb, wall'
    - builds:
      - default: kobra_release
      - gdb: kobra_debug
      - wall: kobra_wall
    - postbuilds:
      - default: '{}'
      - gdb: 'gdb {}'
      - wall: '{}'
  - experimental:
    - builds:
      - default: experimental_normal
    - postbuilds:
      - default: '{}'
